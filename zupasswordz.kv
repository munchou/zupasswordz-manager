#:import update_language pwd_manager_languages.update_language
#:import set_lang pwd_manager_languages.set_lang
#:import Languages pwd_manager_languages.Languages

# tried: "Noto", "NotoSansJP-Regular", "NotoSansJP", "Noto Sans JP", "Noto Sans Japanese", "Noto Sans"
# <Label>
#     font_name: "meiryo" if set_lang == "JAP" else "Roboto"
# <MDLabel>
#     font_name: "meiryo" if set_lang == "JAP" else "Roboto"
# <MDTextField>
#     font_name: "meiryo" if set_lang == "JAP" else "Roboto"
# <MDTextFieldHintText>
#     font_name: "meiryo" if set_lang == "JAP" else "Roboto"

<LoginScreen>:
    username_input: username_input
    password_input_login: password_input_login
    username_input_reg: username_input_reg
    password_input_reg: password_input_reg
    password_input_confirm: password_input_confirm

    md_bg_color: self.theme_cls.backgroundColor


    MDBoxLayout:
        orientation: "horizontal"
        theme_bg_color: "Custom"
        md_bg_color: app.theme_cls.TopAppBarBgColor
        size_hint: 1, None
        height: "65dp"
        pos_hint: {"top": 1}

        Label:
            text: root.main_title
            font_size: "25sp"

    MDIconButton:
        icon: "power"
        theme_icon_color: "Custom"
        icon_color: app.theme_cls.listscreenTopAppBarIconColor
        theme_font_size: "Custom"
        font_size: "30sp"
        pos: root.width - dp(30+20), root.height - dp(53)
        on_release:
            root.close_app()

    # MDBoxLayout:
    #     orientation: "vertical"
    #     # padding: 0
    #     # spacing: 0
    #     size_hint: None, None
    #     # pos: 0, root.height/2
    #     pos_hint: {"center_x": 0.5, "center_y": 0.5}
    #     # pos: 0, dp(40)

    MDBoxLayout:
        orientation: "vertical"
        size_hint: 1, None
        pos: 0, root.height-dp(530) - ((root.height-dp(530)+dp(20))/2)
        # padding: 0, "50dp", 0, 0
        # pos_hint: {"center_x": 0.5}
        # pos_hint: {"center_x": 0.5, "center_y": 0.5}
        # spacing: self.width * 0.025
        spacing: dp(10)
        

        MDTextField:
            id: username_input
            multiline: False
            write_tab: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldLeadingIcon:
                icon: "account"
                theme_icon_color: "Custom"
                icon_color_normal: app.theme_cls.textfieldIconColor
                icon_color_focus: app.theme_cls.textfieldIconColorFocus
            MDTextFieldHintText:
                text: root.textfield_username_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
            # MDTextFieldTrailingIcon:
            #     icon: "eye"
            #     theme_icon_color: "Custom"
            #     icon_color_normal: app.theme_cls.textfieldIconColor
            #     icon_color_focus: app.theme_cls.textfieldIconColorFocus

        MDTextField:
            id: password_input_login
            multiline: False
            write_tab: False
            password: True
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldLeadingIcon:
                icon: "key"
                theme_icon_color: "Custom"
                icon_color_normal: app.theme_cls.textfieldIconColor
                icon_color_focus: app.theme_cls.textfieldIconColorFocus
            MDTextFieldHintText:
                text: root.textfield_password_login_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
            # MDTextFieldTrailingIcon:
            #     icon: "eye-off"
            #     theme_icon_color: "Custom"
            #     icon_color_normal: app.theme_cls.textfieldIconColor
            #     icon_color_focus: app.theme_cls.textfieldIconColorFocus
        
        MDBoxLayout:
            orientation: "horizontal"
            size_hint: 0.8, None
            height: "40dp"
            pos_hint: {"center_x": 0.5}
            spacing: self.width * 0.025

            Button:
                text: root.btn_login
                background_color: app.theme_cls.buttonBackgroundColor
                background_normal: ""
                on_release: root.user_login(False, False)
                size_hint: 1, None
                height: "40dp"
                pos_hint: {"center_x": 0.5}
                spacing: 10
        
        MDBoxLayout:
            orientation: "horizontal"
            size_hint: 0.8, None
            height: "40dp"
            pos_hint: {"center_x": 0.5}
            spacing: self.width * 0.025

            Button:
                text: root.btn_import_data
                background_color: app.theme_cls.buttonBackgroundColor
                background_normal: ""
                on_release: root.user_login(False, True)
                size_hint: 0.3, None
                height: "40dp"
                pos_hint: {"center_x": 0.5}
                spacing: 10

        # MDBoxLayout: # TO CREATE EMPTY SPACE
        #     orientation: "horizontal"
        #     #theme_bg_color: "Custom"
        #     #md_bg_color: app.theme_cls.TopAppBarIconBgColor
        #     size_hint: 1, None
        #     height: root.height - (dp(40*2) + (self.width * 0.025 *3) + dp(550))
        #     pos_hint: {"center_x": 0.5}

        Label:
            text: root.label_not_registered
            size_hint: 0.8, None
            pos_hint: {'center_x': 0.5}
            height: "40dp"

        MDTextField:
            id: username_input_reg
            multiline: False
            write_tab: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldLeadingIcon:
                icon: "account"
                theme_icon_color: "Custom"
                icon_color_normal: app.theme_cls.textfieldIconColor
                icon_color_focus: app.theme_cls.textfieldIconColorFocus
            MDTextFieldHintText:
                text: root.textfield_username_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
            # MDTextFieldTrailingIcon:
            #     icon: "eye"
            #     theme_icon_color: "Custom"
            #     icon_color_normal: app.theme_cls.textfieldIconColor
            #     icon_color_focus: app.theme_cls.textfieldIconColorFocus

        MDTextField:
            id: password_input_reg
            multiline: False
            write_tab: False
            password: True
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldLeadingIcon:
                icon: "key"
                theme_icon_color: "Custom"
                icon_color_normal: app.theme_cls.textfieldIconColor
                icon_color_focus: app.theme_cls.textfieldIconColorFocus
            MDTextFieldHintText:
                text: root.textfield_textfield_password_register_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
            # MDTextFieldTrailingIcon:
            #     icon: "eye-off"
            #     theme_icon_color: "Custom"
            #     icon_color_normal: app.theme_cls.textfieldIconColor
            #     icon_color_focus: app.theme_cls.textfieldIconColorFocus

        MDTextField:
            id: password_input_confirm
            multiline: False
            write_tab: False
            password: True
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldLeadingIcon:
                icon: "key"
                theme_icon_color: "Custom"
                icon_color_normal: app.theme_cls.textfieldIconColor
                icon_color_focus: app.theme_cls.textfieldIconColorFocus
            MDTextFieldHintText:
                text: root.textfield_password_confirm_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
            # MDTextFieldTrailingIcon:
            #     icon: "eye-off"
            #     theme_icon_color: "Custom"
            #     icon_color_normal: app.theme_cls.textfieldIconColor
            #     icon_color_focus: app.theme_cls.textfieldIconColorFocus

        Button:
            text: root.btn_signin
            background_color: app.theme_cls.buttonBackgroundColor
            background_normal: ""
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5}
            height: "40dp"
            on_release: root.new_user()
    
        MDBoxLayout: # TO CREATE EMPTY SPACE of 10dp
            orientation: "horizontal"
            size_hint: 1, None
            height: "0dp"
            pos_hint: {"center_x": 0.5}
    
    MDBoxLayout:
        orientation: "horizontal"
        theme_bg_color: "Custom"
        md_bg_color: app.theme_cls.TopAppBarBgColor
        size_hint: 1, None
        height: "50dp"
        pos_hint: {"center_x": 0.5}
        spacing: self.width * 0.025
        padding: "5dp", 0, "5dp", "5dp"

        MDIconButton:
            icon: "information-outline"
            theme_font_size: "Custom"
            font_size: "35sp"
            size_hint: None, None
            size: "40dp", "40dp"
            color: 1, 1, 1, 1
            on_release:
                # app.screenmanager.get_screen('loginscreen').app_informationpage()
                root.app_informationpage()

        # Widget:
        Label:
            text: "version b25.04b"
            size_hint: 0.8, None
            pos_hint: {'center_x': 0.5}
            height: "40dp"

        MDIconButton:
            icon: "cog"
            theme_font_size: "Custom"
            font_size: "35sp"
            size_hint: None, None
            size: "40dp", "40dp"
            color: 1, 1, 1, 1
            on_release:
                root.settingspage()


<ItemBind>
    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.listscreenListBgColor
    on_release: app.screenmanager.get_screen('listscreen').selected(self.app_name)


<ListScreen>:
    MDFloatLayout:
        id: listscreen
        md_bg_color: app.theme_cls.backgroundColor    

        MDBoxLayout:
            orientation: "vertical"

            MDTopAppBar:
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.listscreenTopAppBarBgColor
                elevation: 1
                type: "small"
                pos_hint: {"top": 1}

                MDTopAppBarLeadingButtonContainer:
                    MDActionTopAppBarButton:
                        icon: "logout"
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.listscreenTopAppBarIconColor
                        on_release: root.logout()
                    
                    MDActionTopAppBarButton:
                        icon: "plus"
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.listscreenTopAppBarIconColor
                        on_release:
                            print("ADD CARD")
                            root.add_card()

                MDTopAppBarTitle:
                    text: root.top_bar_text
                    pos_hint: {"center_x": 0.5}
                    theme_text_color: "Custom"
                    text_color: app.theme_cls.listscreenTopAppBarTitleColor
            
            SearchBar:
                id: searchbar
                mode: "filled"
                write_tab: False
                radius: 0
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:

                MDTextFieldHintText:
                    text: root.searchfield_text
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor
                
                MDTextFieldTrailingIcon:
                    icon: "eye-off"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus

                # MDIconButton:
                #     icon: "close-circle-outline"
                #     theme_font_size: "Custom"
                #     font_size: "30sp"
                #     #size_hint: None, None
                #     #size: "40dp", "40dp"
                #     color: 1, 1, 1, 1
                #     on_release: root.ids.searchbar.text = ""
                #     pos_hint: {'x':0.8, 'y':0.72}

            RecycleView:
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.backgroundColor

                MDList:
                    id: entries_list
                    padding: "0dp"
                    spacing: "1dp"
                    #theme_bg_color: "Custom"
                    #md_bg_color: app.theme_cls.backgroundColor

            MDBottomAppBar:
                id: bottom_appbar
                allow_hidden: False
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.listscreenBottomAppBarBg

                MDFabBottomAppBarButton:
                    id: fab_button
                    theme_icon_color: "Custom"
                    icon: "trash-can-outline"
                    icon_color: app.theme_cls.backgroundColor
                    theme_bg_color: "Custom"
                    
                    on_release: root.remove_entry() if root.selected_item != "" else print("prout") #print("REMOOOOVE") #print("EDIT button") if root.selected_entry else print("PLUS has been clicked")

        # MDIconButton:
        #     icon: "close-circle-outline"
        #     theme_font_size: "Custom"
        #     font_size: "30sp"
        #     #size_hint: None, None
        #     #size: "40dp", "40dp"
        #     color: 1, 1, 1, 1
        #     on_release: root.reset_input_text = True
        #     pos_hint: {'x':0.8, 'y':0.72}

        RelativeLayout:
            MDIconButton:
                icon: "text-box-remove"
                theme_font_size: "Custom"
                font_size: "30sp"
                color: 1, 1, 1, 1
                on_release: root.ids.searchbar.text = ""
                pos: root.ids.searchbar.width - dp(55), root.height - dp(83) - root.ids.searchbar.height/2

        Label:
            text: root.bottom_bar_text
            text_size: self.size
            font_size: "25dp"
            padding: "95dp", 0, 0, "24dp"
            halign: "left"
            valign: "bottom"

    MDIconButton:
        icon: "download-lock"
        theme_icon_color: "Custom"
        icon_color: app.theme_cls.listscreenTopAppBarIconColor
        theme_font_size: "Custom"
        font_size: "30sp"
        pos: root.width - dp(30+20), root.height - dp(53)
        on_release:
            root.backup_savepage()
            # app.screenmanager.get_screen('loginscreen').close_app()


<InformationPage>
    radius: 0
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.backgroundColor

    MDRelativeLayout:
        MDFloatLayout: # TEXT BACKGROUND
            size_hint: None, None
            width: root.width - dp(40)
            height: root.height - dp(95)
            pos: dp(20), dp(20)
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.listscreenListBgColor

        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "65dp"
            pos_hint: {"top": 1}


        AnchorLayout:
            size_hint_y: None
            # pos_hint: {"center_x": 0.92, "center_y": 0.955}
            pos: root.width/2-dp(30), root.height-dp(50)-dp(32)
        
            MDIconButton:
                icon: "close-circle-outline"
                theme_font_size: "Custom"
                font_size: "30sp"
                color: 1, 1, 1, 1
                on_release:
                    root.removed = True
                    root.parent.close_page()

        Label:
            text: root.info_page_title
            text_size: self.size
            font_size: "25dp"
            valign: "top"
            padding: 0, "15dp", 0, 0
            halign: "center"

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            padding: "30dp", 0, "30dp", 0
            pos_hint: {"center_x": 0.5}
            pos: 0, dp(40)

            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: root.height - dp(120)
                padding: 0, "10dp", 0, 0

                MDScrollView:
                    do_scroll_x: False

                    MDLabel:
                        text: root.app_info
                        theme_text_color: "Custom"
                        text_color: "white"
                        theme_font_size: "Custom"
                        font_size: "14sp"
                        adaptive_height: True
                        markup: True
                        # padding:[40,40]
                        # height: "80dp"


<AddEntryCard>
    app_name_input: app_name_input
    app_user_input : app_user_input
    app_pwd_input: app_pwd_input
    app_pwd_confirm: app_pwd_confirm
    app_info: app_info

    #padding: "10dp"
    radius: 0
    #size_hint: 0.95, 0.95
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    # ripple: False

    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.backgroundColor

    MDRelativeLayout:
        #theme_bg_color: "Custom"
        #md_bg_color: 1, 1, 1, 0.1

        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "65dp"
            pos_hint: {"top": 1}

        AnchorLayout:
            size_hint_y: None
            # pos_hint: {"center_x": 0.92, "center_y": 0.955}
            pos: root.width/2-dp(30), root.height-dp(50)-dp(32)
        
            MDIconButton:
                icon: "arrow-left-thin-circle-outline"
                theme_font_size: "Custom"
                font_size: "30sp"
                #size_hint: None, None
                #size: "40dp", "40dp"
                color: 1, 1, 1, 1
                on_release:
                    root.removed = True
                    app.screenmanager.get_screen('listscreen').remove_card()


        Label:
            text: root.entry_title_update if root.button_text == Languages().btn_update_entry else root.entry_title_add
            text_size: self.size
            font_size: "25dp"
            valign: "top"
            padding: 0, "20dp", 0, 0
            halign: "center"

        MDTextField:
            id: app_name_input
            text: root.app_name_update if root.button_text == Languages().btn_update_entry else ""
            multiline: False
            write_tab: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.85}
            height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_appname_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
        
        MDTextField:
            id: app_user_input
            text: root.app_user_update if root.button_text == Languages().btn_update_entry else ""
            multiline: False
            write_tab: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_appuser_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: app_pwd_input
            text: "********" if root.button_text == Languages().btn_update_entry else ""
            multiline: False
            write_tab: False
            password: True
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.60}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_apppwd_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: app_pwd_confirm
            text: "********" if root.button_text == Languages().btn_update_entry else ""
            multiline: False
            write_tab: False
            password: True
            #background_color: root.input_color
            #foreground_color: root.white
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.50}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_apppwd_confirm_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: app_info
            text: root.app_info_update if root.button_text == Languages().btn_update_entry else ""
            multiline: False
            write_tab: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.35}
            height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_appinfo_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
        
        # MDBoxLayout:
        #     orientation: "vertical"
        #     size_hint: 1, None
        #     pos_hint: {"center_x": 0.5}


            # MDBoxLayout:
            #     orientation: "horizontal"
            #     size_hint: 1, None
            #     height: "30dp"

            #     Label:
            #         text: "ICONS list"
            #         text_size: self.size
            #         padding: "30dp", 0, 0, "10dp"
            #         height: "10dp"

        MDBoxLayout:
            # orientation: "vertical"
            size_hint: None, None
            height: "100dp"
            width: "350dp"
            # pos_hint: {"center_x": 0.5}
            pos: root.width/2 - dp(180), dp(60)

            RecycleView:
                size_hint: 1, None
                height: "150dp"
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.backgroundColor
                do_scroll_x: False

                MDList:
                    id: icons_scroll
                    theme_bg_color: "Custom"
                    md_bg_color: app.theme_cls.backgroundColor
                    size_hint: None, None
                    size: (0, 0)

        Button:
            text: root.button_text
            background_color: app.theme_cls.buttonBackgroundColor
            background_normal: ""
            size_hint: 0.3, None
            height: "40dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.05}
            on_release:
                root.removed = True
                root.new_entry_details()


<IconsBind>
    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.listscreenListBgColor
    size_hint_y: None
    height: "40dp"
    padding: 0, 0, 0, 0


<IconItem>
    icon: root.icon
    # theme_font_size: "Custom"
    # font_size: "80sp"
    color: 1, 1, 1, 1
    on_release: root.change_icon(root.icon)
        # root.selected_icon = root.icon
        # print(root.selected_icon)

<BackupSavePage>
    backup_filepwd_input: backup_filepwd_input
    backup_filepwd_confirm: backup_filepwd_confirm
    radius: 0
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.backgroundColor

    MDRelativeLayout:
        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "65dp"
            pos_hint: {"top": 1}
        
        MDIconButton:
            icon: "close-circle-outline"
            theme_font_size: "Custom"
            font_size: "30sp"
            pos: root.width - dp(30+20), root.height - dp(30+21)
            #size_hint: None, None
            #size: "40dp", "40dp"
            color: 1, 1, 1, 1
            on_release:
                root.removed = True
                root.unbind_key()
                root.parent.close_page()

        Label:
            text: root.backup_title
            text_size: self.size
            font_size: "25dp"
            valign: "top"
            padding: 0, "12dp", 0, 0
            halign: "center"

        MDTextField:
            id: backup_filepwd_input
            text: ""
            multiline: False
            write_tab: False
            password: True
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_apppwd_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: backup_filepwd_confirm
            text: ""
            multiline: False
            write_tab: False
            password: True
            #background_color: root.input_color
            #foreground_color: root.white
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.15}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: root.textfield_apppwd_confirm_hint
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
            
        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            padding: "30dp", 0, "30dp", 0
            pos_hint: {"center_x": 0.5}
            pos: 0, dp(40)

            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: root.height - dp(120)
                padding: 0, "10dp", 0, 0

                MDScrollView:
                    do_scroll_x: False

                    MDLabel:
                        text: root.backup_info
                        theme_text_color: "Custom"
                        text_color: "white"
                        theme_font_size: "Custom"
                        font_size: "16sp"
                        adaptive_height: True
                        height: "80dp"

        Button:
            text: root.btn_backup
            background_color: app.theme_cls.buttonBackgroundColor
            background_normal: ""
            size_hint: 1, None
            height: "40dp"
            pos_hint: {"center_x": 0.5}
            on_release: root.backup_data()


<SettingsPage>
    radius: 0
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.backgroundColor

    MDRelativeLayout:
        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "65dp"
            pos_hint: {"top": 1}


        # AnchorLayout:
        #     size_hint_y: None
        #     # pos_hint: {"center_x": 0.92, "center_y": 0.955}
        #     pos: 0, 0
        
        MDIconButton:
            icon: "close-circle-outline"
            theme_font_size: "Custom"
            font_size: "30sp"
            pos: root.width - dp(30+20), root.height - dp(30+21)
            #size_hint: None, None
            #size: "40dp", "40dp"
            color: 1, 1, 1, 1
            on_release:
                root.removed = True
                root.unbind_key()
                root.parent.close_page()


        Label:
            text: root.title_text
            text_size: self.size
            font_size: "25dp"
            valign: "top"
            padding: 0, "15dp", 0, 0
            halign: "center"

        MDBoxLayout: # language flags top line
            orientation: "horizontal"
            theme_bg_color: "Custom"
            size_hint: 1, None
            pos_hint: {"center_x": 0.5,}
            pos: 0, root.height - dp(30+83+15)
            spacing: (self.width - 6*dp(40))/7
            padding: (self.width - 6*dp(40))/7, 0, "5dp", "5dp"

            MDButton: # ENG
                size_hint: None, None
                background: "img/flag_ENG.png"
                height: "40dp"
                width: "40dp"
                on_release: update_language("ENG")
            
            MDButton: # FRA
                size_hint: None, None
                background: "img/flag_FRA.png"
                height: "40dp"
                width: "40dp"
                on_release: update_language("FRE")
            
            MDButton: # ITA
                size_hint: None, None
                background: "img/flag_ITA.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("ITA")
            
            MDButton: # SPA
                size_hint: None, None
                background: "img/flag_SPA.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("SPA")
            
            MDButton: # GER
                size_hint: None, None
                background: "img/flag_GER.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("GER")

            MDButton: # POL
                size_hint: None, None
                background: "img/flag_POL.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("POL")
        
        MDBoxLayout: # language flags second line
            orientation: "horizontal"
            theme_bg_color: "Custom"
            size_hint: 1, None
            pos_hint: {"center_x": 0.5,}
            pos: 0, root.height - dp(83+30+15+40+15)
            spacing: (self.width - 6*dp(40))/7
            padding: (self.width - (5*dp(40) + 4*self.spacing))/2, 0, "5dp", "5dp"

            MDButton: #  FIN
                size_hint: None, None
                background: "img/flag_FIN.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("FIN")

            MDButton: # NOR
                size_hint: None, None
                background: "img/flag_NOR.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("NOR")
            
            MDButton: # SWE
                size_hint: None, None
                background: "img/flag_SWE.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("SWE")

            MDButton: # VN
                size_hint: None, None
                background: "img/flag_VN.png"
                height: "40dp"
                width: "40dp"
                on_release: root.lang_not_avail() #update_language("VN")

            MDButton: # JAP
                size_hint: None, None
                background: "img/flag_JAP.png"
                height: "40dp"
                width: "40dp"
                on_release: update_language("JAP")
        
        MDBoxLayout: # theme previews
            id: theme_previews
            orientation: "horizontal"
            theme_bg_color: "Custom"
            #md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            pos_hint: {"center_x": 0.5,}
            pos: 0, dp(40+30+148+30)
            spacing: (self.width - 4*dp(75))/5
            padding: (self.width - 4*dp(75))/5, 0, "5dp", "5dp"


            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "blue-purple" else "elevated"
                radius: 0 if root.current_theme == "blue-purple" else 15
                background: "img/theme_preview_blue-purple.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("blue-purple")
                    root.current_theme = "blue-purple"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "georgia-coffee" else "elevated"
                radius: 0 if root.current_theme == "georgia-coffee" else 15
                background: "img/theme_preview_georgia-coffee.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("georgia-coffee")
                    root.current_theme = "georgia-coffee"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "kirby" else "elevated"
                radius: 0 if root.current_theme == "kirby" else 15
                background: "img/theme_preview_kirby.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("kirby")
                    root.current_theme = "kirby"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "macha" else "elevated"
                state: "down"
                radius: 0 if root.current_theme == "macha" else 15
                background: "img/theme_preview_macha.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("macha")
                    root.current_theme = "macha"
        
        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            #md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            # height: "50dp"
            pos_hint: {"center_x": 0.5,}
            pos: 0, dp(40+30)
            spacing: (self.width - 4*dp(75))/5
            padding: (self.width - 4*dp(75))/5, 0, "5dp", "5dp"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "suntory-coffee" else "elevated"
                radius: 0 if root.current_theme == "suntory-coffee" else 15
                background: "img/theme_preview_suntory-coffee.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("suntory-coffee")
                    root.current_theme = "suntory-coffee"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "aqua" else "elevated"
                radius: 0 if root.current_theme == "aqua" else 15
                background: "img/theme_preview_aqua.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("aqua")
                    root.current_theme = "aqua"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "grey" else "elevated"
                radius: 0 if root.current_theme == "grey" else 15
                background: "img/theme_preview_grey.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("grey")
                    root.current_theme = "grey"
            
            MDButton:
                size_hint: None, None
                style: "filled" if root.current_theme == "fall" else "elevated"
                radius: 0 if root.current_theme == "fall" else 15
                background: "img/theme_preview_fall.png"
                height: "148dp"
                width: "75dp"
                on_release:
                    root.set_theme("fall")
                    root.current_theme = "fall"

        Button:
            text: root.btn_settings_apply
            background_color: app.theme_cls.buttonBackgroundColor
            background_normal: ""
            size_hint: 1, None
            height: "40dp"
            pos_hint: {"center_x": 0.5}
            on_release: app.screenmanager.get_screen('loginscreen').close_app()


<AppDetailsPage>
    #padding: "10dp"
    radius: 0
    #size_hint: 0.95, 0.95
    pos_hint: {"center_x": 0.5, "center_y": 0.5}

    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.backgroundColor

    MDRelativeLayout:
        MDFloatLayout: # TEXT BACKGROUND
            size_hint: 0.9, None
            # pos_hint: {"center_x": 0.5, "center_y": 0.5}
            height: root.height - dp(110)
            pos: root.width/18, root.width/18
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.listscreenListBgColor

        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "65dp"
            pos_hint: {"top": 1}


        AnchorLayout:
            size_hint_y: None
            pos_hint: {"center_x": 0.92, "center_y": 0.955}
        
            MDIconButton:
                icon: "arrow-left-thin-circle-outline"
                # icon: "arrow-left-circle-outline"
                # icon: "arrow-left-drop-circle-outline"
                # icon: "arrow-left-bold"
                theme_font_size: "Custom"
                font_size: "30sp"
                #size_hint: None, None
                #size: "40dp", "40dp"
                color: 1, 1, 1, 1
                on_release:
                    root.removed = True
                    root.parent.remove_appdetailspage()
                    # app.screenmanager.get_screen('listscreen').remove_card()

        Label:
            text: root.selected_item
            text_size: self.size
            font_size: "25dp"
            valign: "top"
            padding: "10dp", "20dp", 0, 0
            halign: "left"

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            height: "50dp"
            padding: "30dp", 0, "20dp", 0 # "30dp", 0, "20dp", 0 if size_hint: 1, None
            pos_hint: {"center_x": 0.5}
            pos: 0, root.height - dp(150) # dp(230)
            # theme_bg_color: "Custom"
            # md_bg_color: app.theme_cls.textfieldBgColor

            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: "30dp"

                Label:
                    text: root.title_username_email
                    text_size: self.size
                    padding: "30dp", 0, 0, "10dp"
                    height: "10dp"

                MDIconButton:
                    icon: "content-copy"
                    theme_font_size: "Custom"
                    font_size: "20sp"
                    color: 1, 1, 1, 1
                    on_release: root.copy_info(root.app_user)
            
            MDLabel:
                text: root.app_user
                theme_text_color: "Custom"
                text_color: "white"
                theme_font_size: "Custom"
                font_size: "20sp"

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            height: "50dp"
            padding: "30dp", 0, "20dp", 0
            pos_hint: {"center_x": 0.5}
            pos: 0, (root.height - dp(150) + dp(230))/2

            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: "30dp"

                Label:
                    text: root.title_password
                    text_size: self.size
                    padding: "30dp", 0, 0, "10dp"
                    height: "10dp"

                MDIconButton:
                    icon: "eye" if root.pwd_display == "********" else "eye-off"
                    theme_font_size: "Custom"
                    font_size: "20sp"
                    color: 1, 1, 1, 1
                    on_press:
                        root.unhide_pwd() if root.pwd_display == "********" else root.hide_pwd()
                    on_release:
                        root.unhide_pwd() if root.pwd_display == "********" else root.hide_pwd()
                
                MDIconButton:
                    icon: "content-copy"
                    theme_font_size: "Custom"
                    font_size: "20sp"
                    color: 1, 1, 1, 1
                    on_release: root.copy_info(root.app_pwd)
            
            MDLabel:
                text: root.pwd_display
                theme_text_color: "Custom"
                text_color: "white"
                theme_font_size: "Custom"
                font_size: "20sp"

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            padding: "30dp", 0, "20dp", 0
            pos_hint: {"center_x": 0.5}
            pos: 0, dp(50)


            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: "30dp"

                Label:
                    text: root.title_appinfo
                    text_size: self.size
                    padding: "30dp", 0, 0, "10dp"
                    height: "10dp"
                
                MDIconButton:
                    icon: "content-copy"
                    theme_font_size: "Custom"
                    font_size: "20sp"
                    color: 1, 1, 1, 1
                    on_release: root.copy_info(root.app_info)


            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: "200dp"
                padding: 0, "10dp", 0, 0

                MDScrollView:
                    do_scroll_x: False

                    MDLabel:
                        text: root.app_info
                        theme_text_color: "Custom"
                        text_color: "white"
                        theme_font_size: "Custom"
                        font_size: "20sp"
                        adaptive_height: True
                        height: "80dp"
        
        MDBoxLayout: # SEPARATOR ABOVE PWD
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.backgroundColor
            size_hint: 1, None
            height: dp(10) # (root.height - dp(150) + dp(230))/2 - dp(320)
            pos_hint: {"center_x": 0.5}
            pos: 0, (root.height - dp(150) + dp(230))/2 +dp(70)

        MDBoxLayout: # SEPARATOR ABOVE INFO
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.backgroundColor
            size_hint: 1, None
            height: dp(10) # (root.height - dp(150) + dp(230))/2 - dp(320)
            pos_hint: {"center_x": 0.5}
            pos: 0, dp(300)
