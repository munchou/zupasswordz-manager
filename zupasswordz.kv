<LoginScreen>:
    username_input: username_input
    password_input_login: password_input_login
    username_input_reg: username_input_reg
    password_input_reg: password_input_reg
    password_input_confirm: password_input_confirm

    md_bg_color: self.theme_cls.backgroundColor


    MDBoxLayout:
        orientation: "horizontal"
        theme_bg_color: "Custom"
        md_bg_color: app.theme_cls.TopAppBarBgColor
        size_hint: 1, None
        height: "65dp"
        pos_hint: {"top": 1}
        #spacing: self.width * 0.025
        #padding: "5dp", 0, "5dp", "5dp"

        Label:
            text: "ZUPAsswordz Manager"
            font_size: "25sp"


    AnchorLayout:
        size_hint_y: None
        #height: but1.height
        pos_hint: {"center_x": 0.92, "center_y": 0.955}

        MDIconButton:
            icon: "power"
            color: app.theme_cls.TopAppBarIconColor
            theme_font_size: "Custom"
            font_size: "30sp"
            size_hint: None, None
            size: "40dp", "40dp"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarIconBgColor
            on_release:
                exit()

    MDBoxLayout:
        orientation: "vertical"
        padding: 0
        spacing: 0
        pos_hint: {"center_y": 0.5}

        MDBoxLayout:
            orientation: "vertical"
            padding: 0, "50dp", 0, 0
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            spacing: self.width * 0.025
            size_hint: 1, None

            MDTextField:
                id: username_input
                multiline: False
                size_hint: 0.8, None
                pos_hint: {"center_x": 0.5}
                mode: "filled"
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                fill_color_focus: app.theme_cls.textfieldBgColorFocus
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:
                    icon: "account"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
                MDTextFieldHintText:
                    text: "username"
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor
                MDTextFieldTrailingIcon:
                    icon: "eye"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus

            MDTextField:
                id: password_input_login
                multiline: False
                password: True
                size_hint: 0.8, None
                pos_hint: {"center_x": 0.5}
                mode: "filled"
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                fill_color_focus: app.theme_cls.textfieldBgColorFocus
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:
                    icon: "key"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
                MDTextFieldHintText:
                    text: "password"
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor
                MDTextFieldTrailingIcon:
                    icon: "eye-off"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
            
            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 0.8, None
                height: "40dp"
                pos_hint: {"center_x": 0.5}
                spacing: self.width * 0.025

                Button:
                    text: "LOGIN"
                    background_color: app.theme_cls.buttonBackgroundColor
                    background_normal: ""
                    on_release: root.user_login(False, False)
                    size_hint: 0.6, None
                    height: "40dp"
                    pos_hint: {"center_x": 0.5}
                    spacing: 10
            
            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 0.8, None
                height: "40dp"
                pos_hint: {"center_x": 0.5}
                spacing: self.width * 0.025

                Button:
                    text: "IMPORT DATA"
                    background_color: app.theme_cls.buttonBackgroundColor
                    background_normal: ""
                    on_release: root.user_login(False, True)
                    size_hint: 0.3, None
                    height: "40dp"
                    pos_hint: {"center_x": 0.5}
                    spacing: 10

                Button:
                    text: "EXPORT DATA"
                    background_color: app.theme_cls.buttonBackgroundColor
                    background_normal: ""
                    on_release: root.user_login(True, False)
                    size_hint: 0.3, None
                    height: "40dp"
                    pos_hint: {"center_x": 0.5}
                    spacing: 10

            MDBoxLayout: # TO CREATE EMPTY SPACE
                orientation: "horizontal"
                #theme_bg_color: "Custom"
                #md_bg_color: app.theme_cls.TopAppBarIconBgColor
                size_hint: 1, None
                height: "40dp"
                pos_hint: {"center_x": 0.5}

            Label:
                text: "Not registered? Create an account"
                size_hint: 0.8, None
                pos_hint: {'center_x': 0.5, 'center_y': 0.1}
                height: "40dp"
                #padding: 0, "60dp", 0, 0

            MDTextField:
                id: username_input_reg
                multiline: False
                size_hint: 0.8, None
                pos_hint: {"center_x": 0.5}
                mode: "filled"
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                fill_color_focus: app.theme_cls.textfieldBgColorFocus
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:
                    icon: "account"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
                MDTextFieldHintText:
                    text: "username"
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor
                MDTextFieldTrailingIcon:
                    icon: "eye"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus

            MDTextField:
                id: password_input_reg
                multiline: False
                password: True
                size_hint: 0.8, None
                pos_hint: {"center_x": 0.5}
                mode: "filled"
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                fill_color_focus: app.theme_cls.textfieldBgColorFocus
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:
                    icon: "key"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
                MDTextFieldHintText:
                    text: "password (8 characters min.)"
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor
                MDTextFieldTrailingIcon:
                    icon: "eye-off"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus

            MDTextField:
                id: password_input_confirm
                multiline: False
                password: True
                size_hint: 0.8, None
                pos_hint: {"center_x": 0.5}
                mode: "filled"
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                fill_color_focus: app.theme_cls.textfieldBgColorFocus
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:
                    icon: "key"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
                MDTextFieldHintText:
                    text: "confirm password"
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor
                MDTextFieldTrailingIcon:
                    icon: "eye-off"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus

            Button:
                text: "SIGN IN"
                background_color: app.theme_cls.buttonBackgroundColor
                background_normal: ""
                on_release: root.new_user()

                # on_release: root.load_profile()
                size_hint: 0.3, None
                pos_hint: {"center_x": 0.5}
                height: "40dp"
                #spacing: 10
        
        MDBoxLayout: # TO CREATE EMPTY SPACE
            orientation: "horizontal"
            #theme_bg_color: "Custom"
            #md_bg_color: app.theme_cls.TopAppBarIconBgColor
            size_hint: 1, None
            height: "10dp"
            pos_hint: {"center_x": 0.5}
        
        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "50dp"
            pos_hint: {"center_x": 0.5}
            spacing: self.width * 0.025
            padding: "5dp", 0, "5dp", "5dp"

            MDIconButton:
                icon: "information-outline"
                theme_font_size: "Custom"
                font_size: "35sp"
                size_hint: None, None
                size: "40dp", "40dp"
                color: 1, 1, 1, 1
                on_release:
                    app.screenmanager.get_screen('loginscreen').app_information()

            MDButton:
                size_hint: None, None
                #background_color: 0, 0, 0, 0
                background: "img/btn_theme-blue-purple.png"
                #background_down: "img/btn_theme-blue-purple.png"
                height: "40dp"
                width: "40dp"
                on_release: app.screenmanager.get_screen('loginscreen').set_theme("blue-purple")

            MDButton:
                size_hint: None, None
                #background_color: 0, 0, 0, 0
                background: "img/btn_theme-georgia-coffee_40dp.png"
                #background_down: "img/btn_theme-georgia-coffee_40dp.png"
                height: "40dp"
                width: "40dp"
                on_release: app.screenmanager.get_screen('loginscreen').set_theme("georgia-coffee")

            MDButton:
                size_hint: None, None
                #background_color: 0, 0, 0, 0
                background: "img/btn_theme-macha_40dp.png"
                #background_down: "img/btn_theme-macha_40dp.png"
                height: "40dp"
                width: "40dp"
                on_release: app.screenmanager.get_screen('loginscreen').set_theme("macha")
            
            MDButton:
                size_hint: None, None
                #background_color: 0, 0, 0, 0
                background: "img/btn_theme-kirby_40dp.png"
                #background_down: "img/btn_theme-kirby_40dp.png"
                height: "40dp"
                width: "40dp"
                on_release: app.screenmanager.get_screen('loginscreen').set_theme("kirby")
            
            MDButton:
                size_hint: None, None
                #background_color: 0, 0, 0, 0
                background: "img/btn_theme-suntory-coffee_40dp.png"
                #background_down: "img/btn_theme-suntory-coffee_40dp.png"
                height: "40dp"
                width: "40dp"
                on_release: app.screenmanager.get_screen('loginscreen').set_theme("suntory-coffee")            


<ItemBind>
    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.listscreenListBgColor

    #on_release: app.screenmanager.get_screen('listscreen').change_name(self.app_name)
    on_release: app.screenmanager.get_screen('listscreen').selected(self.app_name)
    #on_release: print(f"{self.app_name}: {self.app_pwd} / {self.app_info}")
    #on_release: app.screenmanager.get_screen('listscreen').ids.entries_list.remove_widget(self)


<ListScreen>:
    MDFloatLayout:
        id: listscreen
        md_bg_color: app.theme_cls.backgroundColor

        MDBoxLayout:
            orientation: "vertical"

            MDTopAppBar:
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.listscreenTopAppBarBgColor
                elevation: 1
                type: "small"
                pos_hint: {"top": 1}

                MDTopAppBarLeadingButtonContainer:
                    MDActionTopAppBarButton:
                        icon: "logout"
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.listscreenTopAppBarIconColor
                        on_release: root.logout() #app.restart()
                        #style: "outlined"
                    
                    MDActionTopAppBarButton:
                        icon: "plus"
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.listscreenTopAppBarIconColor
                        on_release:
                            root.add_card()

                MDTopAppBarTitle:
                    text: root.top_bar_text
                    pos_hint: {"center_x": 0.5}
                    theme_text_color: "Custom"
                    text_color: app.theme_cls.listscreenTopAppBarTitleColor

                MDTopAppBarTrailingButtonContainer:
                    MDActionTopAppBarButton:
                        icon: "power"
                        theme_icon_color: "Custom"
                        icon_color: app.theme_cls.listscreenTopAppBarIconColor
                        #pos_hint: {"center_x": 1}
                        on_release: exit()
            
            SearchBar:
                mode: "filled"
                #pos_hint: {"center_x": .5, "center_y": .5}
                theme_bg_color: "Custom"
                fill_color_normal: app.theme_cls.textfieldBgColor
                #fill_color_focus: app.theme_cls.textfieldBgColorFocus
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldTextColor
                text_color_focus: app.theme_cls.textfieldTextColorFocus
                theme_line_color: "Custom"
                line_color_normal: app.theme_cls.textfieldLineColor
                line_color_focus: app.theme_cls.textfieldLineColorFocus

                MDTextFieldLeadingIcon:
                    icon: "eye"
                    theme_icon_color: "Custom"
                    icon_color_normal: app.theme_cls.textfieldIconColor
                    icon_color_focus: app.theme_cls.textfieldIconColorFocus
                MDTextFieldHintText:
                    text: "Search..."
                    theme_text_color: "Custom"
                    text_color_normal: app.theme_cls.textfieldIconColor

            RecycleView:
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.backgroundColor

                MDList:
                    id: entries_list
                    padding: "0dp"
                    spacing: "1dp"
                    #theme_bg_color: "Custom"
                    #md_bg_color: app.theme_cls.backgroundColor

            MDBottomAppBar:
                id: bottom_appbar
                allow_hidden: False
                theme_bg_color: "Custom"
                md_bg_color: app.theme_cls.listscreenBottomAppBarBg

                MDFabBottomAppBarButton:
                    #pos: 0.9, 0.2
                    id: fab_button
                    theme_icon_color: "Custom"
                    icon: "trash-can-outline"
                    icon_color: app.theme_cls.backgroundColor
                    theme_bg_color: "Custom"
                    
                    on_release: root.remove_entry() if root.selected_item != "" else print("prout") #print("REMOOOOVE") #print("EDIT button") if root.selected_entry else print("PLUS has been clicked")
                
        Label:
            text: root.bottom_bar_text
            text_size: self.size
            font_size: "25dp"
            #font_size: self.width/20
            padding: "95dp", 0, 0, "24dp"
            halign: "left"
            valign: "bottom"


<AddEntryCard>
    app_name_input: app_name_input
    app_user_input : app_user_input
    app_pwd_input: app_pwd_input
    app_pwd_confirm: app_pwd_confirm
    app_info: app_info

    #padding: "10dp"
    radius: 0
    #size_hint: 0.95, 0.95
    pos_hint: {"center_x": 0.5, "center_y": 0.5}

    theme_bg_color: "Custom"
    md_bg_color: app.theme_cls.backgroundColor

    MDRelativeLayout:
        #theme_bg_color: "Custom"
        #md_bg_color: 1, 1, 1, 0.1

        MDBoxLayout:
            orientation: "horizontal"
            theme_bg_color: "Custom"
            md_bg_color: app.theme_cls.TopAppBarBgColor
            size_hint: 1, None
            height: "65dp"
            pos_hint: {"top": 1}

        AnchorLayout:
            size_hint_y: None
            pos_hint: {"center_x": 0.92, "center_y": 0.955}
        
            MDIconButton:
                icon: "close-circle-outline"
                theme_font_size: "Custom"
                font_size: "30sp"
                #size_hint: None, None
                #size: "40dp", "40dp"
                color: 1, 1, 1, 1
                on_release:
                    app.screenmanager.get_screen('listscreen').remove_card()


        Label:
            text: "UPDATE AN ENTRY" if root.button_text == "UPDATE" else "ADD AN ENTRY"
            text_size: self.size
            font_size: "25dp"
            valign: "top"
            padding: 0, "20dp", 0, 0
            halign: "center"

        MDTextField:
            id: app_name_input
            text: root.app_name_update if root.button_text == "UPDATE" else ""
            multiline: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.85}
            height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: "name of the app/website"
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor
        
        MDTextField:
            id: app_user_input
            text: root.app_user_update if root.button_text == "UPDATE" else ""
            multiline: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: "username/e-mail"
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: app_pwd_input
            text: root.app_pwd_update if root.button_text == "UPDATE" else ""
            multiline: False
            password: True
            #background_color: root.input_color
            #foreground_color: root.white
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.60}
            #height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: "password (8 characters min.)"
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: app_pwd_confirm
            text: root.app_pwd_update if root.button_text == "UPDATE" else ""
            multiline: False
            password: True
            #background_color: root.input_color
            #foreground_color: root.white
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.50}
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: "confirm password"
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        MDTextField:
            id: app_info
            text: root.app_info_update if root.button_text == "UPDATE" else ""
            multiline: False
            size_hint: 0.8, None
            pos_hint: {"center_x": 0.5, "center_y": 0.35}
            height: "40"
            mode: "filled"
            theme_bg_color: "Custom"
            fill_color_normal: app.theme_cls.textfieldBgColor
            fill_color_focus: app.theme_cls.textfieldBgColorFocus
            theme_text_color: "Custom"
            text_color_normal: app.theme_cls.textfieldTextColor
            text_color_focus: app.theme_cls.textfieldTextColorFocus
            theme_line_color: "Custom"
            line_color_normal: app.theme_cls.textfieldLineColor
            line_color_focus: app.theme_cls.textfieldLineColorFocus

            MDTextFieldHintText:
                text: "description (optional)"
                theme_text_color: "Custom"
                text_color_normal: app.theme_cls.textfieldIconColor

        Button:
            text: root.button_text
            background_color: app.theme_cls.buttonBackgroundColor
            background_normal: ""
            size_hint: 0.3, None
            height: "40dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.05}
            on_release:
                root.new_entry_details()